# Веб-панель мониторинга VPN

## Описание

Веб-панель для мониторинга состояния VPN-сервиса:
- Количество подключённых устройств
- Статус серверов (доступность, нагрузка)
- Статистика использования
- Управление пользователями (для владельца)

## Структура

```
web/
├── app.py              # Flask приложение
├── templates/          # HTML шаблоны
│   ├── index.html     # Главная страница
│   ├── servers.html   # Статус серверов
│   └── users.html     # Список пользователей
├── static/            # CSS, JS файлы
│   ├── style.css
│   └── main.js
└── requirements.txt   # Зависимости
```

## Функциональность

### Для всех пользователей:
- Просмотр статуса серверов
- Просмотр статистики использования
- Просмотр количества активных подключений

### Для владельца (админ):
- Управление пользователями
- Просмотр детальной статистики
- Мониторинг нагрузки на серверах
- Управление серверами

## Установка

```bash
# Установить зависимости
pip install -r requirements.txt

# Настроить переменные окружения
cp env_vars.example.txt env_vars.txt
# Заполнить ADMIN_ID и другие параметры

# Запустить приложение
python app.py
```

## Деплой

Веб-панель разворачивается на том же сервере Timeweb, где работает бот (`/opt/vpnservice`). Пошаговая инструкция: **`../docs/deployment.md`** — раздел «Веб-панель мониторинга (Timeweb)».

Пример systemd unit: `vpn-web.service.example` в этой папке.

## Безопасность

- Аутентификация через Telegram (опционально)
- Доступ только для владельца (по ADMIN_ID)
- HTTPS через nginx reverse proxy (рекомендуется)

## API Endpoints

- `GET /` — главная страница
- `GET /api/servers` — статус серверов (JSON)
- `GET /api/users` — список пользователей (JSON)
- `GET /api/stats` — статистика использования (JSON)

## Связанные документы

- `../bot/storage.py` — модель данных пользователей и пиров
- `../docs/deployment.md` — информация о серверах
- `../docs/architecture.md` — архитектура системы
